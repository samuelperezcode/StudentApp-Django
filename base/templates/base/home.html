{% extends 'layout.html' %}

    {% block mainBlock %}
        <style>
            .home-container{
                display: grid;
                grid-template-columns: 1fr 3fr 1fr;
            }
        </style>
        <div class= 'home-container'>

            <div class="topics">
                <h3>Browse Topics</h3>
                <hr>
                
                <div>
                    <a href="{% url 'home' %}">All</a>
                </div>
                {% for topic in topics  %}
                    <div>
                        <a href="{% url 'home' %}?q={{ topic.name }}">{{ topic.name }}</a>
                    </div>
                {% endfor %}
                    
            </div>

            <div>
                <h1>Home Page</h1>
                <br>
                <h5>{{ room_count }} rooms available</h5>
                <a href="{% url 'create-room' %}">Create Room</a>
                <hr>
                
                {% for room in rooms %}
                    <div>
                        
                        {% if request.user == room.host %}
                            <a href="{% url 'update-room' room.id %}">Edit</a>
                            <a href="{% url 'delete-room' room.id %}">Delete</a>   
                        {% endif %}
                            
                        <br>
                        <span><a href="%">@{{ room.host.username}}</a></span>
                        <h5>{{ room.id }} --<a href="{% url 'room' room.id %}">{{ room.name }}</a></h5>
                        <small>{{ room.topic.name }}</small>
                        <hr>
                    </div>
                {% endfor %}
            </div>
            <div class="activity">
                <h3>Recent Activity</h3>
                <hr>
                {% for sms in room_messages %}
                    <div>
                        <small> <a href="">@{{ sms.user }}</a> -- {{ sms.created|timesince}} ago</small>
                        <br>
                        <small>replied to {{ sms }}</small>
                        <p>
                            {{sms.body}}
                        </p>
                        {% if request.user == sms.user %}
                            <a href="{% url 'delete-message' sms.id %}">Delete</a>
                            <br>                              
                        {% endif %}
                    </div>
                {% endfor %}
            </div>
        </div>
    {% endblock mainBlock %}